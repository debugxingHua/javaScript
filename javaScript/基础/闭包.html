<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JavaScript学习-闭包</title>
</head>
<body>
    <p>闭包：函数内部使用全局变量就是最简单的闭包</p>
    <p>内部函数也是闭包</p>
    <p>有权访问另一个函数作用域内变量的函数都是闭包.</p>
    <p>闭包就是一个函数引用另外一个函数的变量，因为变量被引用着所以不会被回收，因此可以用来封装一个私有变量。
        这是优点也是缺点，不必要的闭包只会徒增内存消耗！另外使用闭包也要注意变量的值是否符合你的要求，
        因为他就像一个静态私有变量一样。.</p>
    <p id="p2">匿名自执行函数</p>
    <p id="p3">缓存</p>
    <p id="p4">封装</p>
</body>
<script>
    function a(){
        var n = 0;
        function inc() {
            n++;
            console.log(n);
        }
        inc();
        inc();
    }
    a(); //控制台输出1，再输出2
    function a2(){
        var n = 0;
        this.inc = function () {
            n++;
            console.log(n);
        };
    }
    var c = new a2();
    c.inc();  //控制台输出1
    c.inc();  //控制台输出2
</script>
<script>
    //声明一个变量，将一个函数当作值赋给变量。
    var Circle = function() {
        var obj = new Object();
        obj.PI = 3.14159;
        obj.area = function( r ) {
            return this.PI * r * r;
        };
        return obj;
    };
    var c = new Circle();
//    alert( c.area( 1.0 ) );

    //声明一个空的对象;效果和上面一样
    var Circle2={
        "PI":3.14159,
        "area":function(r){
            return this.PI * r * r;
        }
    };
//    alert( Circle2.area(1.0) );
</script>
<script>
    var data= {
        table : [],
        tree : {}
    };
    (function(dm){
        dm.table.rows = 123;
        var row = dm.table.rows;
        console.log(row);
    })(data);
    console.log(data);
//    console.log(row);
</script>
</html>